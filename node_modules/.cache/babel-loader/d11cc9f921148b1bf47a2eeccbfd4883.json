{"ast":null,"code":"import _regeneratorRuntime from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"H:\\\\taopp\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"H:\\\\taopp\\\\my-app\\\\src\\\\routes\\\\home\\\\index.js\";\nimport React, { Component } from 'react';\nimport './index.scss';\nimport '../../commen.scss';\nimport TopBar from './components/TopBar';\nimport PosterSlide from './components/Slide';\nimport MovieItem from './components/MovieItem';\nimport CityLayer from './components/CityLayer';\nimport TabMenu from '../../components/TabMenu';\nimport RenderToBody from '../../components/RenderToBody';\nimport request from '../../helpers/request';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Home)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      city: '',\n      // 城市\n      poster: [],\n      // 轮播\n      movie: [],\n      // 主页电影列表\n      cityLayerVisible: false // 城市选择是否弹出\n\n    };\n\n    _this.showCitylayer = function () {\n      _this.setState({\n        cityLayerVisible: true\n      });\n    };\n\n    _this.getData =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var data, city, poster, movie;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return request('/index');\n\n            case 2:\n              data = _context.sent;\n              console.log(data);\n              city = data.city, poster = data.poster, movie = data.movie;\n\n              _this.setState({\n                city: city,\n                poster: poster,\n                movie: movie\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      // 获取主页数据\n      this.getData();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          city = _this$state.city,\n          poster = _this$state.poster,\n          movie = _this$state.movie,\n          cityLayerVisible = _this$state.cityLayerVisible;\n      return React.createElement(\"div\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, React.createElement(TopBar, {\n        city: city,\n        showCitylayer: this.showCitylayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"home-slide\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"home-slideWrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(PosterSlide, {\n        data: poster,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }))), React.createElement(\"ul\", {\n        className: \"home-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, movie.map(function (items, index) {\n        return React.createElement(\"li\", {\n          key: \"items.poster+index\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(MovieItem, {\n          data: items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        })), console.log(items.poster);\n      })), React.createElement(TabMenu, {\n        current: 'movie',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), cityLayerVisible && React.createElement(RenderToBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(CityLayer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["H:\\taopp\\my-app\\src\\routes\\home\\index.js"],"names":["React","Component","TopBar","PosterSlide","MovieItem","CityLayer","TabMenu","RenderToBody","request","Home","state","city","poster","movie","cityLayerVisible","showCitylayer","setState","getData","data","console","log","map","items","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './index.scss';\r\nimport '../../commen.scss';\r\nimport TopBar from './components/TopBar'\r\nimport PosterSlide from './components/Slide'\r\nimport MovieItem from './components/MovieItem'\r\nimport CityLayer from './components/CityLayer'\r\nimport TabMenu from '../../components/TabMenu'\r\nimport RenderToBody from '../../components/RenderToBody'\r\nimport request from '../../helpers/request'\r\n\r\nclass Home extends Component {\r\n\r\n  state = {\r\n  \tcity: '', // 城市\r\n  \tposter: [], // 轮播\r\n  \tmovie: [], // 主页电影列表\r\n  \tcityLayerVisible: false // 城市选择是否弹出\r\n  }\r\n\r\n  showCitylayer = () => {\r\n  \t\t\r\n  \t\tthis.setState({\r\n  \t\t\tcityLayerVisible: true\r\n  \t\t})\r\n\t}\r\n\r\n  componentWillMount() { // 获取主页数据\r\n  \tthis.getData();\r\n  }\r\n\r\n  getData = async () => { // 获取主页数据\r\n  \tconst data = await request('/index');\r\n  \tconsole.log(data);\r\n  \tconst {city, poster, movie} = data;\r\n  \tthis.setState({\r\n  \t\tcity,\r\n  \t\tposter,\r\n  \t\tmovie\r\n  \t})\r\n\r\n  }\r\n\r\n  render() {\r\n  \tconst {city, poster, movie, cityLayerVisible} = this.state;\r\n    return (\r\n      <div className=\"home\">\r\n      \t\t{/*主页顶部*/}\r\n        \t<TopBar city= {city} showCitylayer={this.showCitylayer}/>\r\n\r\n\t\t\t{/*主页顶部*/}\r\n        \t<div className=\"home-slide\">\r\n        \t\t<div className=\"home-slideWrap\">\r\n        \t\t\t<PosterSlide data={poster} />\r\n        \t\t</div>\r\n        \t</div>\r\n\r\n            {/*电影列表*/}\r\n        \t<ul className=\"home-content\">\r\n        \t{\r\n        \t\tmovie.map((items, index) => { \r\n        \t\t\treturn (\r\n        \t\t\t\t<li key=\"items.poster+index\"><MovieItem data={items} /></li>,\r\n        \t\t\t\tconsole.log(items.poster)\r\n        \t\t\t\t)\r\n        \t\t\t\r\n        \t\t})\r\n        \t}\r\n        \t\t\r\n        \t</ul>\r\n\r\n\t\t\t{/*主页底部tab*/}\r\n        \t<TabMenu current={'movie'}/>\r\n\r\n            {/*全部城市*/}\r\n        \t{ cityLayerVisible && <RenderToBody><CityLayer /></RenderToBody> }\r\n        \t\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}